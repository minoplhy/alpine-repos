# Contributor: Minoplhy <c@3qx.nl>
maintainer="Minoplhy <c@3qx.nl>"
pkgname=minoplhy-crowdsec-notify
pkgver=0.0.2
pkgrel=0
pkgdesc="Crowdsec Notifications"
url="https://crowdsec.net/"
arch="noarch"
license="MIT"
subpackages="$pkgname-discord:_plugin"
options="!check" # no test suite identified
source="discord.yaml::https://chy.li/p-p/minoplhy/scriptbox/raw/branch/main/crowdsec-notifications/discord.yaml"

package() {
    install -dm 0755 \
	"$pkgdir"/etc/crowdsec/notifications

	install -m 0600 \
        "$srcdir"/discord.yaml \
		"$pkgdir"/etc/crowdsec/notifications
}

_plugin() {
	_subpkgname="${subpkgname#minoplhy-crowdsec-notify-}"
	pkgdesc="$pkgname plugin: $_subpkgname"
	depends="$pkgname=$pkgver-r$pkgrel"
	amove etc/crowdsec/notifications/$_subpkgname.yaml
    # Excerpt from minoplhy's original modification of minoplhy-crowdsec
    # 
    #if [[ $_subpkgname -ne "discord" ]]; then
	#    amove usr/libexec/crowdsec/plugins/notification-$_subpkgname
    #fi
}

sha512sums="
29b76491f2226296e5f43f7ff0df3047a47ffac27d67bf8bd429768ec7451b4166ed8417ec4a816eedd3d17d40fe2a79ee0d3387249ae7f34417e252be56b531  discord.yaml
"
